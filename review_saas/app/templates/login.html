
{% extends 'base.html' %}
{% block content %}
  <h3>Login</h3>
  <form id="loginForm" class="row g-2">
    <div class="col-md-6"><input class="form-control" name="email" type="email" placeholder="Email" required></div>
    <div class="col-md-6"><input class="form-control" name="password" type="password" placeholder="Password" required></div>
    <div class="col-12"><button class="btn btn-primary" type="button" onclick="login()">Login</button></div>
  </form>
  <script>
    async function login(){
      const fd = new FormData(document.getElementById('loginForm'));
      const payload = {email: fd.get('email'), password: fd.get('password')};
      const r = await fetch('/auth/login', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)});
      const j = await r.json(); alert(JSON.stringify(j));
    }
  </script>
{% endblock %}
